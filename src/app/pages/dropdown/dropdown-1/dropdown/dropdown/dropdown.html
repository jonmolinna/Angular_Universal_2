<div class="relative inline-block text-left" #dropdownContainer>
  <!-- BUTTON -->
  <button
    type="button"
    class="inline-flex justify-center items-center w-full gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 transition-colors duration-200"
    [class]="classes"
    (click)="toggle()"
    (keydown.arrowdown)="onArrowDown($event)"
    (keydown.arrowup)="onArrowUp($event)"
    (keydown.enter)="onEnter($event)"
    (keydown.escape)="close()"
    [attr.aria-expanded]="isOpen()"
    [attr.aria-haspopup]="true"
    [attr.id]="menuClasses()"
  >
    <!-- BUTTON CONTENT -->
    <ng-content select="[slot=trigger]">
      <span>{{ title() }}</span>
    </ng-content>

    <!-- Arrow Icon -->
    @if(showArrow) {
    <!-- OPEN MENU -->
    @if(isOpen()) {
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      class="size-5"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
    </svg>

    }
    <!-- CLOSE MENU -->
    @else {
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      class="size-5"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
    </svg>

    }}
  </button>

  <!-- Dropdown Menu -->
  @if(isOpen()) {
  <div
    class="absolute z-10 mt-2 origin-top-right rounded-md bg-white shadow-lg border border-gray-200 transition-all duration-200 ease-out"
    [class]="menuClasses()"
    [class.opacity-100]="isVisible()"
    [class.scale-100]="isVisible()"
    [class.opacity-0]="!isVisible()"
    [class.scale-95]="!isVisible()"
    role="menu"
    [attr.aria-orientation]="'vertical'"
    [attr.aria-labelledby]="triggerId()"
    #dropdownMenu
  >
    <div class="py-1" role="none">
      <!-- Custom Content -->
      <ng-content></ng-content>

      <!-- Options from array -->
      @for(option of options; track option.value) { @if(option.separator) {
      <div class="border-t border-gray-200 my-1"></div>
      } @else {
      <button
        type="button"
        class="flex w-full items-center px-4 py-2 text-sm transition-colors duration-150"
        [class.text-gray-700]="!option.disabled"
        [class.hover:bg-gray-100]="!option.disabled"
        [class.text-gray-400]="option.disabled"
        [class.cursor-not-allowed]="option.disabled"
        [disabled]="option.disabled"
        (click)="selectOption(option)"
        role="menuitem"
      >
        @if(option.icon) {
        <span class="mr-3 text-lg">{{ option.icon }}</span>
        }
        <span>{{ option.label }}</span>
      </button>
      } }
    </div>
  </div>
  }
</div>
